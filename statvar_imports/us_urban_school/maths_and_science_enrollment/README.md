# US_Urban_MathsAndScience_Course_Enrollment Import

This import contains US data on enrollment in Biology, Chemistry, Advanced Math, Calculus, Algebra II, Physics, and Geometry courses.

-----

## ⚙️ Workflow

The workflow for this data import involves two main steps: downloading the necessary files and then processing them.

### Step 1: Download the Source Data

To acquire the necessary data files, execute the download script `download.py`.

```bash
python3 download.py
```

All downloaded files will be stored in the directory `maths_and_science_enrollment/input_files`.

### Autorefresh type

This import uses a fully automated refresh process.

-----

### Step 2: Process the Files

After successfully downloading the files, run the processing script to generate the final output artifacts. There are two ways to do this:

**Option A: Use the `run.sh` script**

The `run.sh` script automates the processing of all the downloaded files.

**Run the following command:**

```bash
sh run.sh
```

**Option B: Manually Execute the Processing Script**

#### **Execution Commands**

The final output is generated by processing the downloaded data using the stat_var_processor.py script, which is located in the data/tools/statvar_importer/ directory.

#### --- 1. Process 2010 and 2012 Files (Older XLSX format) ---
```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*.xlsx \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/maths_and_science_2010_2012_output
```

#### --- 2. Process 2016 File (Separate CSV) ---
```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/2016_School_data.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/maths_and_science_2016_output
```

#### --- 3. Process 2018 onwards Files (Combined CSVs for each course) ---
```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Advanced_Mathematics.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/advanced_mathematics_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Algebra_II.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/algebra2_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Biology.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/biology_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Calculus.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/calculus_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Chemistry.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/chemistry_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Geometry.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/geometry_2018_onwards_output
```

```bash
python3 stat_var_processor.py \
--input_data=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/input_files/*_Physics.csv \
--pv_map=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/maths_and_science_pvmap.csv \
--config_file=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/metadata.csv \
--existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
--output_path=../../../statvar_imports/us_urban_school/maths_and_science_enrollment/output_files/physics_2018_onwards_output
```

