#### Copyright 2025 Google LLC
####
#### Licensed under the Apache License, Version 2.0 (the "License");
#### you may not use this file except in compliance with the License.
#### You may obtain a copy of the License at
####
####    https://www.apache.org/licenses/LICENSE-2.0
####
#### Unless required by applicable law or agreed to in writing, software
#### distributed under the License is distributed on an "AS IS" BASIS,
#### WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#### See the License for the specific language governing permissions and
#### limitations under the License.

-----

## US_UrbanSchool_Enrollment Import

This import focuses on urban school enrollment data across the United States. It includes data for student enrollment counts, broken down by gender, race, Limited English Proficiency, and disability status (Section 504 and Individualized Education Program).

-----

### ⚙️ Workflow

The workflow for this data import involves two main steps: downloading the necessary files and then processing them.

#### Step 1: Download the Source Data

To acquire the necessary data files, execute the download script `download.py`.

All downloaded files will be stored in the directory `input_files`.

### Autorefresh type

This import uses a fully automated refresh process.

-----

#### Step 2: Process the Files

After successfully downloading the files, run the processing script to generate the final output artifacts.

#### **Execution Commands**

The final output is generated by processing the downloaded data using the stat_var_processor.py script, which is located in the data/tools/statvar_importer/ directory.

    ```bash
    python3 $SCRIPT_PATH/../../../tools/statvar_importer/stat_var_processor.py \
    --input_data=../../../statvar_imports/us_urban_school/enrollment/input_files/*.csv \
    --pv_map=../../../statvar_imports/us_urban_school/enrollment/race_and_sex_pvmap.csv \
    --config_file=../../../statvar_imports/us_urban_school/enrollment/metadata.csv \
    --existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
    --output_path=../../../statvar_imports/us_urban_school/enrollment/output_files/enrollment_by_race_and_sex_output
    ```
    
    ```bash
    python3 stat_var_processor.py \
    --input_data=../../../statvar_imports/us_urban_school/enrollment/input_files/*.csv
    --pv_map=../../../statvar_imports/us_urban_school/enrollment/disability_and_sex_pvmap.csv \
    --config_file=../../../statvar_imports/us_urban_school/enrollment/metadata.csv \
    --existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
    --output_path=../../../statvar_imports/us_urban_school/enrollment/output_files/enrollment_by_disability_and_sex_output
    ```

    ```bash
    python3 stat_var_processor.py \
    --input_data=../../../statvar_imports/us_urban_school/enrollment/input_files/*.csv \
    --pv_map=../../../statvar_imports/us_urban_school/enrollment/lep_and_sex_pvmap.csv \
    --config_file=../../../statvar_imports/us_urban_school/enrollment/metadata.csv \
    --existing_statvar_mcf=gs://unresolved_mcf/scripts/statvar/stat_vars.mcf \
    --output_path=../../../statvar_imports/us_urban_school/enrollment/output_files/enrollment_by_lep_and_sex_output
    ```

