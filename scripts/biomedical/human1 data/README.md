# Importing Human1 data

## Table of Contents

1. [About the Dataset](#about-the-dataset)
    1. [Download URL](#download-url)
    2. [Database Overview](#database-overview)
    3. [Schema Overview](#schema-overview)
    4. [Notes and Caveats](#notes-and-caveats)
    5. [License](#license)
2. [About the Import](#about-the-import)
    1. [Scripts](#scripts)
    2. [tMCF files](#tMCF-files)
    3. [Example](#example)
    
    
## About The Dataset

### Download URL

The input tsv files, which were generated by extracting data from [Human-Gem.xml](https://github.com/SysBioChalmers/Human-GEM/blob/master/model/Human-GEM.xml) file in [Human-GEM repository](https://github.com/SysBioChalmers/Human-GEM), were obtained from [this repository](https://github.com/paul-shannon/bio-gdb/tree/main/forSam/v1). <br>
An interactive web portal for viewing Human1 data can be found [here](https://metabolicatlas.org/)

### Database Overview 

This directory stores scripts and data for generating csv files which can be combined with the provided tMCF and MCF files to ingest Human1 data to Data Commons knowledge graph. 

#### Data files <br>

* Entities:

|File| Description|
---------|-----------
|[genes.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/genes.tsv)| containing information about genes|
|[metabolites.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/metabolites.tsv)| containing informaion about metabolites|
|[reactions.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/reactions.tsv)| containing information about reactions|
|[groups.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/groups.tsv)| containing information about metabolites classification/metabolic subsytems|

* Relationships:

|File| Description|
---------|-----------
|[geneRoles.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/geneRoles.tsv)| indicating relationships between gene and reactions|
|[reactantRoles.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/reactantRoles.tsv)| indicating relationships between reactions and their reatants|
|[productRoles.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/productRoles.tsv)| inicating relationships between reactions and their products|
|[groupMemberships.tsv](https://github.com/khoahoang1891999/ISB_project/tree/main/data/groupMemberships.tsv)| indicating relationships between reations and the subsystems they belong to|



### Schema Overview 

Human1 data contains information about the relationships between metabolites, reactions, metabolic subsystems, and proteins/genes involved in reations. 

"systemsBiologyOntologyTerm" property is defined in [systemsBiologyOntology.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/systemsBiologyOntologyTerm.mcf) <br>
A new class of Metabolite and its associated properties ("humanGEMID", "chemicalFormula", "cellularCompartment", "biggID", "metanetxID", "lipimapsID") are defined in [Metabolite.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/Metabolite.mcf) and [CellularCompartmentEnum.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/CellularCompartmentEnum.mcf) <br>
A new class of Reaction and its associated properties ("humanGEMID", "biggID", "metanetxID", "reversiblReaction", "fastReaction", "metabolicFluxRange", "enzymeCommissionNumber", "keggReactionID", "reactomeID") are defined in [Reaction.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/Reaction.mcf)<br>
A new class of MetabolicReactionSubsystem and its associated properties ("humanGEMID","hierachyType") are defined in [MetabolicReactionSubsystems.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/MetabolicReactionSubsystem.mcf) and [HierachyTypeEnum.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/HierachyTypeEnum.mcf) <br>
Relationship between genes and reactions is defined in [geneRole.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/geneRole.mcf). as property "geneRole"<br> 
Relationship between metabolites and reactions are defined in [productMetabolite.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/productMetabolite.mcf) and [reactantMetabolite.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/reactantMetabolite.mcf) as properties "productMetabolite" and "reactantMetabolite" <br>
Relationship between reactions and metabolic subsystems is defined in [memberOfMetabolicReactionSubsystem.mcf](https://github.com/khoahoang1891999/ISB_project/blob/main/MCF%20files/memberOfMetabolicReactionSubsystem.mcf) as property "memberOfMetabolicReactionSubsystem" .

### Notes and Caveats

Several gene symbols were not abled to map to existing Gene dcid on Data Commons knowledge graph. Specifically, NTAQ1 couldn't be found on GenomeAssembly hg38. NTAQ1, Z83844.1, AC011462.1, AL845331.1, AC022400.5, AP000812.4, AC093512.2, AL160260.1 couldn't be found on GenomeAssembly hg19. <br>

8 metabolites are metabolite classes, in which case humanGEMIDs are used as dcid <br>

### License

Creative Commons Attribution 4.0 International
More information about License can be found [here](https://github.com/SysBioChalmers/Human-GEM/blob/master/LICENSE.md)

## About the Import 

### Scripts
|File| Description|
---------|-----------
|[format_genes_geneRoles.py](https://github.com/khoahoang1891999/ISB_project/blob/main/scripts/format_genes_geneRoles.py)|Inputs: genes.tsv, geneRoles.tsv <br> Outputs: formatted genes.csv, geneRoles.csv|
|[format_metabolites_reactantRoles_productRoles.py](https://github.com/khoahoang1891999/ISB_project/blob/main/scripts/format_metabolites_reactantRoles_productRoles.py)|Inputs: metabolites.tsv, reactants.tsv, products.tsv <br> Outputs: formatted metabolites.csv, reactants.csv, products.csv|
|[format_reactions.py](https://github.com/khoahoang1891999/ISB_project/blob/main/scripts/format_reactions.py)|Inputs: reactions.tsv <br> Outputs: formatted reactions.csv|
|[format_groups_groupMemberships.py](https://github.com/khoahoang1891999/ISB_project/blob/main/scripts/format_groups_groupMemberships.py)|Inputs: groups.tsv, groupMemberships.tsv<br> Outputs: formatted groups.csv, groupMemberships.tsv|

### tMCF files
|File| Description|
---------|-----------
|[genes.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/genes.tmcf)| combine with genes.csv for ingestion  |
|[metabolites.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/metabolites.tmcf)| combine with metabolites.csv for ingestion  |
|[reactions.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/reactions.tmcf)| combine with reactions.csv for ingestion  |
|[groups.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/groups.tmcf)| combine with groups.csv for ingestion  |
|[geneRoles.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/geneRoles.tmcf)| combine with geneRoles.csv for ingestion  |
|[reactantRoles.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/reactantRoles.tmcf)| combine with reactantRoles.csv for ingestion  |
|[productRoles.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/productRoles.tmcf)| combine with productRoles.csv for ingestion  |
|[groupMemberships.tmcf](https://github.com/khoahoang1891999/ISB_project/blob/main/tMCF%20files/groupMemberships.tmcf)| combine with groupMemberships.csv for ingestion  |

### Example 

To format genes.tsv and geneRoles.tsv, run:
```bash
python format_genes_geneRoles.py "genes.tsv" "geneRoles.tsv"
```

The formatted genes.csv and geneRoles.csv will be generated in the current directory. These csv files can be combined with its corressponding tMCF files for data ingestion to Data Commons.

